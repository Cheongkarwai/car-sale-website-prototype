<div class="container-fluid vh-80">
  <div class="row justify-content-center">
    <div class="col-md-8 pt-3">
      <h2>Manage User</h2>
      <div class="p-3 border rounded-1 overflow-x-auto">
        <div class="d-flex justify-content-between flex-wrap">
          <div>
            <mat-chip-listbox aria-label="Authority selection">
              <mat-chip-option *ngFor="let option of (authorities$ | async)" [ngStyle]="{'background-color':'gray'}"
                               [value]="option.title" [selected]="option.selected"
                               (selectionChange)="onChangeSelection($event)">{{option.title | titlecase}}</mat-chip-option>
            </mat-chip-listbox>
          </div>
          <div class="py-3">
            <form [formGroup]="searchForm">
              <mat-form-field floatLabel="always" class="example-full-width" appearance="outline">
                <mat-label>Search</mat-label>
                <input matInput placeholder="Search" formControlName="search" (keyup.enter)="search($event)"
                       (keyup)="clearSearch($event)">
                <mat-icon matPrefix>search</mat-icon>
              </mat-form-field>
            </form>
          </div>
        </div>
        <ng-template #loading>
          <div class="d-flex justify-content-center flex-column loading-container vh-80">
            <span class="text-center">Loading.. Please contact admin if it is still loading 10 minutes</span>
            <mat-spinner class="mt-5" style="margin:0 auto;"
                         mode="indeterminate"></mat-spinner>
          </div>
        </ng-template>
        <ng-container *ngIf="(accounts$ | async) as accounts;else loading">
          <div class="table-container mat-elevation-z8 " >
              <app-table [data]="accounts" [columns]="displayedColumns" [enableEdit]="true" [enableDelete]="true" (sort)="sorting($event)" (delete)="deleteAccount($event)" (edit)="editAccount($event)"></app-table>
<!--          </div>-->

<!--            <div class="d-flex">-->
              <mat-paginator [pageSizeOptions]="[25,50,100]"
                             [pageIndex]="pageable.page"
                             [pageSize]="pageable.size"
                             [length]="accounts.totalElements"
                             showFirstLastButtons
                             aria-label="Select page of periodic elements"
                             (page)="onPageSelection($event)">
              </mat-paginator>

          </div>
        </ng-container>
      </div>
    </div>
  </div>
</div>
